!function(a){"use strict";a(document).ready(function(){a(".sort-by",".archive-agent-action .sort-agent").on("click",function(e){var t=a(this);return e.preventDefault(),t.next("ul").hasClass("active")?(t.next("ul").removeClass("active"),t.removeClass("active")):(t.next("ul").addClass("active"),t.addClass("active")),!1}),a("li",".archive-agent-action .sort-agent").each(function(){var e=a(this);window.location.href.indexOf("sortby="+e.children().data("sortby"))>-1&&(e.addClass("active"),e.closest("ul").prev("span").html(e.children().html())),e.on("click","a",function(e){if(a(this).closest("ul").removeClass("active"),a(this).parent().hasClass("active"))return e.preventDefault(),!1;a(this).closest("ul").prev("span").html(a(this).html())})}),a(document).on("click",function(e){0==a(e.target).closest(".sort-agent").length&&a("ul",".sort-agent").each(function(){var e=a(this);e.hasClass("active")&&(e.removeClass("active"),e.prev("span").removeClass("active"))})}),a("span",".archive-agent-action .view-as").each(function(){var e=a(this);window.location.href.indexOf("view_as")>-1?window.location.href.indexOf("view_as="+e.data("view-as"))>-1&&e.addClass("active"):a(".ere-agent",".ere-archive-agent").hasClass(e.data("view-as"))&&e.addClass("active");var t=!0;e.on("click",function(e){var s=a(this),i=s.data("view-as"),n=s.closest(".ere-archive-agent").find(".ere-agent"),c=s.closest(".view-as").data("admin-url");if(s.hasClass("active")||!t)return e.preventDefault(),!1;s.closest(".view-as").find("span").removeClass("active"),s.addClass("active"),n.fadeOut(),setTimeout(function(){"agent-list"==i?n.removeClass("agent-grid").addClass("agent-list list-1-column"):n.removeClass("agent-list list-1-column").addClass("agent-grid"),n.fadeIn("slow")},400),a.ajax({url:c,data:{action:"ere_agent_set_session_view_as_ajax",view_as:i},success:function(){t=!0},error:function(){t=!0}})})}),a(".paging-navigation",".ere-archive-agent").each(function(){var e=a(this);0===e.find("a.next").length?e.addClass("next-disable"):e.removeClass("next-disable")})})}(jQuery);